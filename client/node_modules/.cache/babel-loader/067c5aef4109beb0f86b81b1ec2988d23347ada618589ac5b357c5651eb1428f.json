{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from \"react\";\nimport { usestore } from \"../../store\";\nimport { getChatHistory, sendChatMessage } from \"../../socketConn\";\nimport { useUserDetails } from \"./useUserDetails\";\nimport { closeChatSubscription } from \"../../socketConn\";\nexport const useChatHistory = channelId => {\n  _s();\n  const {\n    chatHistory\n  } = useStore();\n  const {\n    isLogged,\n    username\n  } = useUserDetails();\n  useEffect(() => {\n    getChatHistory(channelId);\n    return () => {\n      closeChatSubscription(channelId);\n    };\n  }, []);\n  const sendMessage = message => {\n    sendChatMessage(channelId, {\n      author: isLogged ? username : \"Guest\",\n      content: message\n    });\n  };\n  return {\n    messages: (chatHistory === null || chatHistory === void 0 ? void 0 : chatHistory.channelId) === channelId ? chatHistory.messages : [],\n    sendMessage\n  };\n};\n_s(useChatHistory, \"2lIHPQ0IjH1gisdjgOkgoIgkI+A=\", true, function () {\n  return [useUserDetails];\n});","map":{"version":3,"names":["useEffect","usestore","getChatHistory","sendChatMessage","useUserDetails","closeChatSubscription","useChatHistory","channelId","_s","chatHistory","useStore","isLogged","username","sendMessage","message","author","content","messages"],"sources":["/Users/adityasrivastava/Desktop/MostlyStream/client/src/shared/hooks/useChatHistory.js"],"sourcesContent":["import { useEffect } from \"react\";\nimport { usestore } from \"../../store\";\nimport { getChatHistory, sendChatMessage } from \"../../socketConn\";\nimport { useUserDetails } from \"./useUserDetails\";\nimport { closeChatSubscription } from \"../../socketConn\";\n\nexport const useChatHistory = (channelId) => {\n  const { chatHistory } = useStore();\n  const { isLogged, username } = useUserDetails();\n\n  useEffect(() => {\n    getChatHistory(channelId);\n\n    return () => {\n      closeChatSubscription(channelId);\n    };\n  }, []);\n\n  const sendMessage = (message) => {\n    sendChatMessage(channelId, {\n      author: isLogged ? username : \"Guest\",\n      content: message,\n    });\n  };\n\n  return {\n    messages: chatHistory?.channelId === channelId ? chatHistory.messages : [],\n    sendMessage,\n  };\n};\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,QAAQ,QAAQ,aAAa;AACtC,SAASC,cAAc,EAAEC,eAAe,QAAQ,kBAAkB;AAClE,SAASC,cAAc,QAAQ,kBAAkB;AACjD,SAASC,qBAAqB,QAAQ,kBAAkB;AAExD,OAAO,MAAMC,cAAc,GAAIC,SAAS,IAAK;EAAAC,EAAA;EAC3C,MAAM;IAAEC;EAAY,CAAC,GAAGC,QAAQ,CAAC,CAAC;EAClC,MAAM;IAAEC,QAAQ;IAAEC;EAAS,CAAC,GAAGR,cAAc,CAAC,CAAC;EAE/CJ,SAAS,CAAC,MAAM;IACdE,cAAc,CAACK,SAAS,CAAC;IAEzB,OAAO,MAAM;MACXF,qBAAqB,CAACE,SAAS,CAAC;IAClC,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMM,WAAW,GAAIC,OAAO,IAAK;IAC/BX,eAAe,CAACI,SAAS,EAAE;MACzBQ,MAAM,EAAEJ,QAAQ,GAAGC,QAAQ,GAAG,OAAO;MACrCI,OAAO,EAAEF;IACX,CAAC,CAAC;EACJ,CAAC;EAED,OAAO;IACLG,QAAQ,EAAE,CAAAR,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEF,SAAS,MAAKA,SAAS,GAAGE,WAAW,CAACQ,QAAQ,GAAG,EAAE;IAC1EJ;EACF,CAAC;AACH,CAAC;AAACL,EAAA,CAvBWF,cAAc;EAAA,QAEMF,cAAc;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}