{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { toast } from \"react-hot-toast\";\nimport { getFollowedChannels, getChannels as getChannelsRequest } from \"../../api\";\nexport const useChannels = () => {\n  _s();\n  const [channels, setChannels] = useState(null);\n  const getChannels = async (isLogged = false) => {\n    const channelsData = await getChannelsRequest();\n    if (channelsData.error) {\n      var _channelsData$excepti, _channelsData$excepti2;\n      return toast.error(((_channelsData$excepti = channelsData.exception) === null || _channelsData$excepti === void 0 ? void 0 : (_channelsData$excepti2 = _channelsData$excepti.response) === null || _channelsData$excepti2 === void 0 ? void 0 : _channelsData$excepti2.data) || \"Error occurred when fetching the channels\");\n    }\n    if (!isLogged) {\n      return setChannels({\n        channels: channelsData.data.channels\n      });\n    }\n    const followedChannelsData = await getFollowedChannels();\n    if (followedChannelsData.error) {\n      var _followedChannelsData, _followedChannelsData2;\n      return toast.error(((_followedChannelsData = followedChannelsData.exception) === null || _followedChannelsData === void 0 ? void 0 : (_followedChannelsData2 = _followedChannelsData.response) === null || _followedChannelsData2 === void 0 ? void 0 : _followedChannelsData2.data) || \"Error occurred when fetching the followed channels\");\n    }\n    setChannels({\n      channels: channelsData.data.channels,\n      followedChannels: channelsData.data.channels.filter(channel => followedChannelsData.data.followedChannels.includes(channel.id))\n    });\n  };\n  return {\n    getChannels,\n    isFetching: !Boolean(channels),\n    allChannels: channels === null || channels === void 0 ? void 0 : channels.channels,\n    followedChannels: channels === null || channels === void 0 ? void 0 : channels.followedChannels\n  };\n};\n_s(useChannels, \"fLv9yuOUl90BhZ3l7I3bguVOm+I=\");","map":{"version":3,"names":["useState","useEffect","toast","getFollowedChannels","getChannels","getChannelsRequest","useChannels","_s","channels","setChannels","isLogged","channelsData","error","_channelsData$excepti","_channelsData$excepti2","exception","response","data","followedChannelsData","_followedChannelsData","_followedChannelsData2","followedChannels","filter","channel","includes","id","isFetching","Boolean","allChannels"],"sources":["/Users/adityasrivastava/Desktop/MostlyStream/client/src/shared/hooks/useChannels.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { toast } from \"react-hot-toast\";\nimport {\n  getFollowedChannels,\n  getChannels as getChannelsRequest,\n} from \"../../api\";\n\nexport const useChannels = () => {\n  const [channels, setChannels] = useState(null);\n\n  const getChannels = async (isLogged = false) => {\n    const channelsData = await getChannelsRequest();\n\n    if (channelsData.error) {\n      return toast.error(\n        channelsData.exception?.response?.data ||\n          \"Error occurred when fetching the channels\"\n      );\n    }\n\n    if (!isLogged) {\n      return setChannels({\n        channels: channelsData.data.channels,\n      });\n    }\n\n    const followedChannelsData = await getFollowedChannels();\n\n    if (followedChannelsData.error) {\n      return toast.error(\n        followedChannelsData.exception?.response?.data ||\n          \"Error occurred when fetching the followed channels\"\n      );\n    }\n\n    setChannels({\n      channels: channelsData.data.channels,\n      followedChannels: channelsData.data.channels.filter((channel) =>\n        followedChannelsData.data.followedChannels.includes(channel.id)\n      ),\n    });\n  };\n\n  return {\n    getChannels,\n    isFetching: !Boolean(channels),\n    allChannels: channels?.channels,\n    followedChannels: channels?.followedChannels,\n  };\n};\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,KAAK,QAAQ,iBAAiB;AACvC,SACEC,mBAAmB,EACnBC,WAAW,IAAIC,kBAAkB,QAC5B,WAAW;AAElB,OAAO,MAAMC,WAAW,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC/B,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGT,QAAQ,CAAC,IAAI,CAAC;EAE9C,MAAMI,WAAW,GAAG,MAAAA,CAAOM,QAAQ,GAAG,KAAK,KAAK;IAC9C,MAAMC,YAAY,GAAG,MAAMN,kBAAkB,CAAC,CAAC;IAE/C,IAAIM,YAAY,CAACC,KAAK,EAAE;MAAA,IAAAC,qBAAA,EAAAC,sBAAA;MACtB,OAAOZ,KAAK,CAACU,KAAK,CAChB,EAAAC,qBAAA,GAAAF,YAAY,CAACI,SAAS,cAAAF,qBAAA,wBAAAC,sBAAA,GAAtBD,qBAAA,CAAwBG,QAAQ,cAAAF,sBAAA,uBAAhCA,sBAAA,CAAkCG,IAAI,KACpC,2CACJ,CAAC;IACH;IAEA,IAAI,CAACP,QAAQ,EAAE;MACb,OAAOD,WAAW,CAAC;QACjBD,QAAQ,EAAEG,YAAY,CAACM,IAAI,CAACT;MAC9B,CAAC,CAAC;IACJ;IAEA,MAAMU,oBAAoB,GAAG,MAAMf,mBAAmB,CAAC,CAAC;IAExD,IAAIe,oBAAoB,CAACN,KAAK,EAAE;MAAA,IAAAO,qBAAA,EAAAC,sBAAA;MAC9B,OAAOlB,KAAK,CAACU,KAAK,CAChB,EAAAO,qBAAA,GAAAD,oBAAoB,CAACH,SAAS,cAAAI,qBAAA,wBAAAC,sBAAA,GAA9BD,qBAAA,CAAgCH,QAAQ,cAAAI,sBAAA,uBAAxCA,sBAAA,CAA0CH,IAAI,KAC5C,oDACJ,CAAC;IACH;IAEAR,WAAW,CAAC;MACVD,QAAQ,EAAEG,YAAY,CAACM,IAAI,CAACT,QAAQ;MACpCa,gBAAgB,EAAEV,YAAY,CAACM,IAAI,CAACT,QAAQ,CAACc,MAAM,CAAEC,OAAO,IAC1DL,oBAAoB,CAACD,IAAI,CAACI,gBAAgB,CAACG,QAAQ,CAACD,OAAO,CAACE,EAAE,CAChE;IACF,CAAC,CAAC;EACJ,CAAC;EAED,OAAO;IACLrB,WAAW;IACXsB,UAAU,EAAE,CAACC,OAAO,CAACnB,QAAQ,CAAC;IAC9BoB,WAAW,EAAEpB,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEA,QAAQ;IAC/Ba,gBAAgB,EAAEb,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEa;EAC9B,CAAC;AACH,CAAC;AAACd,EAAA,CA1CWD,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}